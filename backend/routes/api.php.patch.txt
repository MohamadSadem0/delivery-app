// Add these lines to routes/api.php:

// Checkout with orchestrator (use idempotency + auth)
use App\Http\Controllers\API\V1\CheckoutController;
Route::middleware(['auth:api','idempotency'])->post('v1/checkout', [CheckoutController::class, 'checkout']);

// Full-text search endpoint (public)
use App\Http\Controllers\API\V1\SearchFullTextController;
Route::get('v1/search/fulltext', SearchFullTextController::class);

// Admin audit logs (admin-only)
use App\Http\Controllers\API\V1\Admin\AuditLogController;
Route::middleware(['auth:api','ensure.admin'])->prefix('v1/admin')->group(function () {
    Route::get('audit-logs', [AuditLogController::class, 'index']);
    Route::get('audit-logs/{log}', [AuditLogController::class, 'show']);
});

// Payment webhook with signature verify+log middleware
// Route::post('v1/payments/webhook', [PaymentController::class,'webhook'])->middleware('verify.and.log.webhook');
