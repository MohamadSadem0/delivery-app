// Inside CheckoutService@checkout before stock decrement:
// $token = 'order_'.$userId.'_'.uniqid();
// foreach ($cart->items as $item) {
//     $reserved = app(\App\Domain\Order\Services\InventoryReservationService::class)
//         ->tryReserve($token, $item->product_id, $item->qty);
//     if (!$reserved) {
//         throw new RuntimeException("Could not reserve stock for {$item->product->name}.");
//     }
// }
// Later: on failure or payment cancellation, call releaseAll($token).
